<!DOCTYPE html>
<html lang="en">

<head>
    <module href="/head.html"></module>
    <title>
        Create Account - On Time Couriers
    </title>
    <script>
        function onSubmit(token) {
            let form = document.body.querySelector('form')
            let formData = new FormData(form)
            validatePassword()
            let submitButton = document.body.querySelector('button#submit')
            if (form.reportValidity()) {
                submitButton.disabled = true
                submitButton.textContent = "Please wait..."
                fetch('/api/formSubmission', { method: 'POST', body: formData }).then(r => {
                    if (r.ok) {
                        alert('Thank you, we have received your request. A member of our team will follow up to confirm your new account shortly.')
                        form.reset()
                        window.location.reload()
                    } else
                        alert('Sorry, an error occurred while submitting this form. Please try again.')
                }, e => {
                    console.error(e)
                    alert('Sorry, an error occurred while submitting this form. Please try again.')
                }).finally(() => {
                    submitButton.disabled = false
                    submitButton.textContent = "Submit"
                })
            }
        }

        function validatePassword() {
            let password = document.body.querySelector('input[name=password]')
            let passwordVerify = document.body.querySelector('input[name=passwordVerify]')
            if (!password.value)
                return
            else if (password.value !== passwordVerify.value || passwordVerify.value.toString().length < 5)
                passwordVerify.setCustomValidity('Passwords must match.')
            else
                passwordVerify.setCustomValidity('')
        }
    </script>
</head>

<body class="pb-5">
    <module href="/navbar.html"></module>

    <module href="/jumbotron/jumbotron.html">
        <module href="/jumbotron/header.html">
            Welcome to the On Time family!
        </module>
        <module href="/jumbotron/text.html">
            Thank you for choosing us for your delivery and process needs. Once you have completed this form, a member of our
            dedicated staff will contact you shortly with your new account number.
        </module>
        <module href="/jumbotron/divider.html"></module>
        <module href="/jumbotron/buttons.html"></module>
    </module>

    <main class="container mt-5" style="max-width:700px;">
        <form>
            <input type="hidden" required readonly name="form" value="create-account">
            <h3>Company Information</h3>
            <div class="mb-3">
                <label for="companyName" class="form-label required">Company</label>
                <input required type="text" minlength="1" class="form-control" name="companyName">
            </div>
            <div class="mb-3">
                <label for="companyType" class="form-label required">Type of Business</label>
                <select required class="form-select" name="companyType" value="">
                    <option value="">Please Choose</option>
                    <option value="Attorney">Attorney</option>
                    <option value="Banking">Banking</option>
                    <option value="Mortgage Company">Mortgage Company</option>
                    <option value="Printing Company">Printing Company</option>
                    <option value="Sports/Entertainment">Sports/Entertainment</option>
                    <option value="Title Company">Title Company</option>
                    <option value="Transportation">Transportation</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="companyPhone" class="form-label required">Phone</label>
                <input required type="tel" pattern="\d{3}-?\d{3}-?\d{4}" placeholder="XXX-XXX-XXXX" class="form-control" name="companyPhone">
            </div>
            <div class="mb-3">
                <label for="companyPhoneExtension" class="form-label">Extension</label>
                <input type="number" min="1" class="form-control" name="companyPhoneExtension">
            </div>
            <div class="mb-3">
                <label for="companyAddressLine1" class="form-label required">Address</label>
                <input required type="text" class="form-control" name="companyAddressLine1">
            </div>
            <div class="mb-3">
                <label for="companyAddressLine2" class="form-label">Suite/Room/Floor</label>
                <input type="text" class="form-control" name="companyAddressLine2">
            </div>
            <div class="mb-3">
                <label for="companyAddressCity" class="form-label required">City</label>
                <input required type="text" class="form-control" name="companyAddressCity">
            </div>
            <div class="mb-3">
                <label for="companyAddressState" class="form-label required">State</label>
                <select required class="form-select" name="companyAddressState" value="">
                    <option value="">Please Select</option>
                    <option value="AK">Alaska</option>
                    <option value="AL">Alabama</option>
                    <option value="AR">Arkansas</option>
                    <option value="AZ">Arizona</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DC">District of Columbia</option>
                    <option value="DE">Delaware</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="HI">Hawaii</option>
                    <option value="IA">Iowa</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MD">Maryland</option>
                    <option value="ME">Maine</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MO">Missouri</option>
                    <option value="MS">Mississippi</option>
                    <option value="MT">Montana</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="NE">Nebraska</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NV">Nevada</option>
                    <option value="NY">New York</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="PR">Puerto Rico</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VA">Virginia</option>
                    <option value="VT">Vermont</option>
                    <option value="WA">Washington</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WV">West Virginia</option>
                    <option value="WY">Wyoming</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="companyAddressZipCode" class="form-label required">Zip Code</label>
                <input required min="10000" max="99999" step="1" placeholder="XXXXX" type="number" class="form-control" name="companyAddressZipCode">
            </div>
            
            <h3 class="mt-5">Your Contact Information</h3>
            <div class="mb-3">
                <label for="contactName" class="form-label required">Name</label>
                <input required type="text" class="form-control" name="contactName">
            </div>
            <div class="mb-3">
                <label for="contactPhone" class="form-label required">Phone</label>
                <input required type="tel" pattern="\d{3}-?\d{3}-?\d{4}" placeholder="XXX-XXX-XXXX" class="form-control" name="contactPhone">
            </div>
            <div class="mb-3">
                <label for="contactPhoneExtension" class="form-label">Extension</label>
                <input type="number" class="form-control" name="contactPhoneExtension">
            </div>
            <div class="mb-3">
                <label for="contactEmail" class="form-label required">Email</label>
                <input required type="email" placeholder="you@website.com" class="form-control" name="contactEmail">
            </div>

            <h3 class="mt-5">Accounts Payable Contact</h3>
            <div class="mb-3">
                <label for="accountsContactName" class="form-label required">Name</label>
                <input required type="text" class="form-control" name="accountsContactName">
            </div>
            <div class="mb-3">
                <label for="accountsContactPhone" class="form-label required">Phone</label>
                <input required type="tel" pattern="\d{3}-?\d{3}-?\d{4}" placeholder="XXX-XXX-XXXX" class="form-control" name="accountsContactPhone">
            </div>
            <div class="mb-3">
                <label for="accountsContactPhoneExtension" class="form-label">Extension</label>
                <input type="number" class="form-control" name="accountsContactPhoneExtension">
            </div>
            <div class="mb-3">
                <label for="accountsContactEmail" class="form-label required">Email</label>
                <input required type="email" placeholder="you@website.com" class="form-control" name="accountsContactEmail">
            </div>
            <div class="mb-3">
                <label class="form-label required">Is the billing address the same as the business address above?</label>
                <br>
                <div class="form-check form-check-inline">
                    <input required class="form-check-input" type="radio" name="sameBillingAddress" id="inlineRadio1" value="Yes">
                    <label class="form-check-label" for="inlineRadio1">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input required class="form-check-input" type="radio" name="sameBillingAddress" id="inlineRadio2" value="No">
                    <label class="form-check-label" for="inlineRadio2">No</label>
                </div>
                <div class="form-text">If the billing address is different than the main business address above, please use the comments/instructions box below
                to enter the correct billing address.</div>
            </div>

            <h3 class="mt-5">User Login Information</h3>
            <p>Your username will be automatically assigned based on the information you have provided. Please enter your desired
            password, and the email address you want the username and password connected to.</p>
            <div class="mb-3">
                <label for="password" class="form-label required">Enter Desired Password</label>
                <input required minlength="5" type="password" class="form-control" name="password">
                <div class="form-text">Must be at least 5 alpha-numeric characters.</div>
            </div>
            <div class="mb-3">
                <label for="passwordVerify" class="form-label required">Verify Password</label>
                <input required minlength="5" type="password" class="form-control" name="passwordVerify" onchange="validatePassword()" onkeyup="this.onchange()" oninput="this.onchange()" onpaste="this.onchange()">
                <div class="form-text">Passwords must match.</div>
            </div>
            <div class="mb-3">
                <label for="loginEmail" class="form-label required">Account Email</label>
                <input required type="email" placeholder="you@website.com" class="form-control" name="loginEmail">
            </div>

            <h3 class="mt-5">Almost Finished...</h3>
            <div class="mb-3">
                <label for="comments" class="form-label">Comments</label>
                <textarea class="form-control" name="comments"></textarea>
            </div>

            <button class="my-5 btn btn-lg btn-success rounded-pill g-recaptcha" data-sitekey="6LcGWY8pAAAAAKcRRK9_swga9Q8cULyP5AtLFlvP" data-callback="onSubmit" data-action="submit" id="submit">Submit</button>
        </form>
    </main>
</body>

</html>